<!-- templates/mini_fb/show_profile_page.html

Single profile page view including status messages from the profile; includes header from base.html-->

{% extends 'mini_fb/base.html' %}
{% block content %}

<table> <!-- displays all profile information -->
    <tr>
        <td><img src= "{{profile_page.image_url}}" style="max-width: 500;"></td>

        
        <td> <h2>{{profile_page.firstname}} {{profile_page.lastname}}</h2>
        <br>
        <b>Hometown:</b> {{profile_page.city}}
        <br>
        <b>Contact:</b> {{profile_page.email}}</td>
    </tr>
</table>
<p> <!--Change profile information-->
    <a href="{% url 'update_profile' profile_page.pk %}">Update This Profile</a>
</p>
<hr>
<h3><u>Status Messages</u></h3> <!--Displays status messages for this particular profile-->
<table>
        <colgroup>
            <col span="1" style="width: 45%;">
            <col span="1" style="width: 50%;">
        </colgroup>
    <tr>
        <center>
                <td><b>Time:</b></td>
                <td><b>Status:</b></td>

        </center>
    </tr>
    {% for status in profile_page.get_status_messages %} <!-- for loop using function defined under model to display profile 'status' mesages entered under admin-->
    
    <tr>
        <td>{{status.timestamp}}</td>
        <td>{{status.message}}</td>
        <td>{% if status.image %}
            <img src='{{status.image.url}}' style='max-width: 600;'>
            {% endif %}
        </td>
        
    </tr>
    {% endfor %}
</table>
<table>
    <!-- For loop/form submission to post and display status messages through the web page instead of admin-->
        <form method='POST' action='/mini_fb/profile/{{profile_page.pk}}/post_status' enctype="multipart/form-data">
            {% csrf_token %}
            {% for field in create_status_form %}
        <tr>
            <th>{{field.name}}</th>
            <td>{{field}}</td>
        </tr>
        <tr> {% endfor %}  
                <td></td>
                <td>
                <input type='submit' name='Update Status' value="Update Status">
                </td> 
        </tr>
  
    </form>
  

</table>

{% endblock %}

